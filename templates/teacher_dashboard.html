{% extends "base.html" %}

{% block content %}
<h1 style="margin-bottom: 1.5rem;">Teacher Dashboard</h1>

<div class="card">
    <div class="card-header">
        <h3 class="card-title">Enter Student Marks</h3>
    </div>
    <p style="color: var(--text-muted); margin-bottom: 1.5rem;">Select a subject and a student to update their marks.
    </p>

    <form action="{{ url_for('update_marks') }}" method="POST">
        <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; align-items: end;">

            <div class="form-group" style="margin-bottom: 0;">
                <label for="subject_id">Subject</label>
                <select name="subject_id" id="subject_id" required>
                    <option value="" disabled selected>Select Subject</option>
                    {% for sub in subjects %}
                    <option value="{{ sub.id }}">{{ sub.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group" style="margin-bottom: 0;">
                <label for="student_id">Student</label>
                <select name="student_id" id="student_id" required>
                    <option value="" disabled selected>Select Student</option>
                    {% for stu in students %}
                    <option value="{{ stu.username }}">{{ stu.name }} ({{ stu.username }})</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group" style="margin-bottom: 0;">
                <label for="marks">Marks (0-100)</label>
                <input type="number" name="marks" id="marks" min="0" max="100" placeholder="e.g. 85" required>
            </div>

            <button type="submit" class="btn">Update Marks</button>
        </div>
    </form>
</div>

<div class="card">
    <div class="card-header">
        <h3 class="card-title">My Assigned Subjects</h3>
    </div>
    {% if subjects %}
    <ul>
        {% for sub in subjects %}
        <li style="padding: 0.5rem 0; border-bottom: 1px solid #eee; last-child: border-bottom: none;">
            <strong>{{ sub.name }}</strong> (ID: {{ sub.id }})
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p style="color: var(--text-muted);">No subjects assigned yet.</p>
    {% endif %}
</div>
{% endblock %}